# Financial Times Scraper API

üóûÔ∏è **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —Å–∫—Ä–∞–ø–µ—Ä –Ω–æ–≤–∏–Ω Financial Times –∑ REST API —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º**

–¶–µ–π –ø—Ä–æ–µ–∫—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–±–∏—Ä–∞—î —Å—Ç–∞—Ç—Ç—ñ –∑ Financial Times —Ç–∞ –Ω–∞–¥–∞—î –∑—Ä—É—á–Ω–∏–π REST API –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –Ω–∏–º–∏.

## ‚ú® –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

- ü§ñ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —Å–∫—Ä–∞–ø–∏–Ω–≥** - –ø–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫ –∑–∞–¥–∞—á –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –∑–±–æ—Ä—É –Ω–æ–≤–∏–Ω
- üöÄ **FastAPI** - —Å—É—á–∞—Å–Ω–∏–π REST API –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—î—é
- üìä **PostgreSQL** - –Ω–∞–¥—ñ–π–Ω–µ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö
- üê≥ **Docker** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—è –¥–ª—è –ª–µ–≥–∫–æ–≥–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è
- üîç **–ü–æ—à—É–∫ —Ç–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è** - –ø–æ—Ç—É–∂–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –ø–æ—à—É–∫—É —Å—Ç–∞—Ç–µ–π
- üìÑ **–ü–∞–≥—ñ–Ω–∞—Ü—ñ—è** - –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∞ —Ä–æ–±–æ—Ç–∞ –∑ –≤–µ–ª–∏–∫–∏–º–∏ –æ–±—Å—è–≥–∞–º–∏ –¥–∞–Ω–∏—Ö
- üéØ **Playwright** - –Ω–∞–¥—ñ–π–Ω–∏–π –≤–µ–±-—Å–∫—Ä–∞–ø–∏–Ω–≥ –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é JavaScript
- üìù **–õ–æ–≥—É–≤–∞–Ω–Ω—è** - –¥–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π

## üõ†Ô∏è –í–∏–º–æ–≥–∏ –¥–æ —Å–∏—Å—Ç–µ–º–∏

- **Docker** 
- **Docker Compose**
- **Git**
- **4GB RAM** (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)
- **2GB** –≤—ñ–ª—å–Ω–æ–≥–æ –º—ñ—Å—Ü—è –Ω–∞ –¥–∏—Å–∫—É

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

1. **–ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:**
```bash
git clone <repository-url>
cd TT_scraper
```

2. **–ó–∞–ø—É—Å—Ç—ñ—Ç—å –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Docker:**
```bash
docker-compose up --build
```

3. **–í—ñ–¥–∫—Ä–∏–π—Ç–µ API –≤ –±—Ä–∞—É–∑–µ—Ä—ñ:**
- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc
- API: http://localhost:8000/api/v1/articles

## üì¶ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Docker (–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

1. **–ö–ª–æ–Ω—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç:**
```bash
git clone <repository-url>
cd TT_scraper
```

2. **–ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤—ñ—Å–∏:**
```bash
# –ó–∞–ø—É—Å–∫ —É —Ñ–æ–Ω–æ–≤–æ–º—É —Ä–µ–∂–∏–º—ñ
docker-compose up -d --build

# –ê–±–æ –∑ –≤–∏–≤–æ–¥–æ–º –ª–æ–≥—ñ–≤
docker-compose up --build
```

3. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞—Ç—É—Å:**
```bash
docker-compose ps
```

### Docker Compose

–§–∞–π–ª `docker-compose.yml` –º—ñ—Å—Ç–∏—Ç—å –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –¥–ª—è:

- **PostgreSQL** - –±–∞–∑–∞ –¥–∞–Ω–∏—Ö (–ø–æ—Ä—Ç 5432)
- **Scraper App** - –æ—Å–Ω–æ–≤–Ω–∏–π –¥–æ–¥–∞—Ç–æ–∫ (–ø–æ—Ä—Ç 8000)
- **pgAdmin** - –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ë–î (–ø–æ—Ä—Ç 5050)

## üìö API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

### –ë–∞–∑–æ–≤—ñ URL

- **Base URL**: `http://localhost:8000`
- **API Base**: `http://localhost:8000/api/v1`

### Endpoints

#### üì∞ –°—Ç–∞—Ç—Ç—ñ

**GET /api/v1/articles**
```
–û—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π –∑ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—î—é —Ç–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—î—é

Query –ø–∞—Ä–∞–º–µ—Ç—Ä–∏:
- page: –Ω–æ–º–µ—Ä —Å—Ç–æ—Ä—ñ–Ω–∫–∏ (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: 1)
- page_size: —Ä–æ–∑–º—ñ—Ä —Å—Ç–æ—Ä—ñ–Ω–∫–∏ (1-100, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: 20)
- search: –ø–æ—à—É–∫ –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É —Ç–∞ –∑–º—ñ—Å—Ç—É
- author: —Ñ—ñ–ª—å—Ç—Ä –ø–æ –∞–≤—Ç–æ—Ä—É
- date_from: –¥–∞—Ç–∞ –ø–æ—á–∞—Ç–∫—É (YYYY-MM-DD)
- date_to: –¥–∞—Ç–∞ –∫—ñ–Ω—Ü—è (YYYY-MM-DD)
```

**GET /api/v1/articles/{id}**
```
–û—Ç—Ä–∏–º–∞—Ç–∏ —Å—Ç–∞—Ç—Ç—é –∑–∞ ID
```

#### üîß –°–ª—É–∂–±–æ–≤—ñ

**GET /**
```
–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ API
```

**GET /health**
```
–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤'—è —Å–µ—Ä–≤—ñ—Å—É
```

**GET /docs**
```
Swagger UI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
```

**GET /redoc**
```
ReDoc –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
```

## üéØ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ü—Ä–∏–∫–ª–∞–¥–∏ HTTP –∑–∞–ø–∏—Ç—ñ–≤

1. **–û—Ç—Ä–∏–º–∞—Ç–∏ –ø–µ—Ä—à—ñ 10 —Å—Ç–∞—Ç–µ–π:**
```bash
curl "http://localhost:8000/api/v1/articles?page=1&page_size=10"
```

2. **–ü–æ—à—É–∫ —Å—Ç–∞—Ç–µ–π –∑–∞ –∫–ª—é—á–æ–≤–∏–º —Å–ª–æ–≤–æ–º:**
```bash
curl "http://localhost:8000/api/v1/articles?search=ukraine"
```

3. **–§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –∑–∞ –∞–≤—Ç–æ—Ä–æ–º:**
```bash
curl "http://localhost:8000/api/v1/articles?author=John%20Smith"
```

4. **–§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –∑–∞ –¥–∞—Ç–æ—é:**
```bash
curl "http://localhost:8000/api/v1/articles?date_from=2024-01-01&date_to=2024-01-31"
```

5. **–ö–æ–º–±—ñ–Ω–æ–≤–∞–Ω–∏–π –∑–∞–ø–∏—Ç:**
```bash
curl "http://localhost:8000/api/v1/articles?search=financial&page=1&page_size=5&date_from=2024-01-01"
```

### –ü—Ä–∏–∫–ª–∞–¥ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ API

```json
{
  "articles": [
    {
      "id": 1,
      "url": "https://www.ft.com/content/...",
      "title": "Breaking: Financial Markets Update",
      "content": "Full article content...",
      "author": "Jane Doe",
      "published_at": "2024-01-20T10:00:00Z",
      "scraped_at": "2024-01-20T10:05:00Z"
    }
  ],
  "total": 150,
  "page": 1,
  "page_size": 20,
  "total_pages": 8
}
```

### Python –∫–ª—ñ—î–Ω—Ç

```python
import requests

# –û—Ç—Ä–∏–º–∞—Ç–∏ —Å—Ç–∞—Ç—Ç—ñ
response = requests.get("http://localhost:8000/api/v1/articles")
data = response.json()

print(f"–ó–Ω–∞–π–¥–µ–Ω–æ {data['total']} —Å—Ç–∞—Ç–µ–π")
for article in data['articles']:
    print(f"- {article['title']} by {article['author']}")
```

### JavaScript –∫–ª—ñ—î–Ω—Ç

```javascript
// –û—Ç—Ä–∏–º–∞—Ç–∏ —Å—Ç–∞—Ç—Ç—ñ
fetch('http://localhost:8000/api/v1/articles?page=1&page_size=5')
  .then(response => response.json())
  .then(data => {
    console.log(`–ó–Ω–∞–π–¥–µ–Ω–æ ${data.total} —Å—Ç–∞—Ç–µ–π`);
    data.articles.forEach(article => {
      console.log(`- ${article.title} by ${article.author}`);
    });
  });
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
TT_scraper/
‚îú‚îÄ‚îÄ app/                     # –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–¥ –¥–æ–¥–∞—Ç–∫—É
‚îÇ   ‚îú‚îÄ‚îÄ api/                 # FastAPI —Ä–æ—É—Ç–µ—Ä–∏ —Ç–∞ –º–æ–¥–µ–ª—ñ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app.py          # –ì–æ–ª–æ–≤–Ω–µ FastAPI –¥–æ–¥–∞—Ç–æ–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py       # Pydantic –º–æ–¥–µ–ª—ñ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ routes.py       # API —Ä–æ—É—Ç–µ—Ä–∏
‚îÇ   ‚îú‚îÄ‚îÄ db/                 # –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ database.py     # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è SQLAlchemy
‚îÇ   ‚îú‚îÄ‚îÄ models/             # ORM –º–æ–¥–µ–ª—ñ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ models.py       # SQLAlchemy –º–æ–¥–µ–ª—ñ
‚îÇ   ‚îú‚îÄ‚îÄ scheduler/          # –ü–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫ –∑–∞–¥–∞—á
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ scheduler.py    # APScheduler –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îÇ   ‚îú‚îÄ‚îÄ scraper/            # –í–µ–±-—Å–∫—Ä–∞–ø–∏–Ω–≥
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ scraper.py      # Playwright —Å–∫—Ä–∞–ø–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ main.py             # –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É
‚îÇ   ‚îî‚îÄ‚îÄ api_server.py       # –¢—ñ–ª—å–∫–∏ API —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ tests/                  # –¢–µ—Å—Ç–∏
‚îú‚îÄ‚îÄ logs/                   # –õ–æ–≥–∏
‚îú‚îÄ‚îÄ data/                   # –¢–∏–º—á–∞—Å–æ–≤—ñ –¥–∞–Ω—ñ
‚îú‚îÄ‚îÄ docker-compose.yml      # Docker Compose –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ Dockerfile              # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ requirements.txt        # Python –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îî‚îÄ‚îÄ README.md              # –¶—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
```

## üß™ –†–æ–∑—Ä–æ–±–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∞ —Ä–æ–∑—Ä–æ–±–∫–∞

1. **–°—Ç–≤–æ—Ä—ñ—Ç—å –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ –æ—Ç–æ—á–µ–Ω–Ω—è:**
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∞–±–æ
venv\Scripts\activate     # Windows
```

2. **–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:**
```bash
pip install -r requirements.txt
```

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å—ñ—Ö —Ç–µ—Å—Ç—ñ–≤
pytest

# –ó–∞–ø—É—Å–∫ –∑ –ø–æ–∫—Ä–∏—Ç—Ç—è–º
pytest --cov=app

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç—É
pytest tests/test_scraper.py -v
```

### –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥—ñ–≤

```bash
# –î–∏–≤–∏—Ç–∏—Å—è –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
docker-compose logs -f scraper

# –õ–æ–≥–∏ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
docker-compose logs postgres

# –í—Å—ñ –ª–æ–≥–∏
docker-compose logs
```

## üîß Troubleshooting

### –õ–æ–≥–∏ —Ç–∞ –≤—ñ–¥–ª–∞–¥–∫–∞

- **–õ–æ–≥–∏ –¥–æ–¥–∞—Ç–∫—É**: `logs/scraper.log`
- **API –ª–æ–≥–∏**: –í –≤–∏–≤–æ–¥—ñ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- **–ë–î –ª–æ–≥–∏**: `docker-compose logs postgres`

### –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å

- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —ñ–Ω–¥–µ–∫—Å–∏ –ë–î –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –ø–æ—à—É–∫—É
- –ù–∞–ª–∞—à—Ç—É–π—Ç–µ `page_size` –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ –≤–∞—à–∏—Ö –ø–æ—Ç—Ä–µ–±
- –ú–æ–Ω—ñ—Ç–æ—Ä—å—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ –ø—Ä–∏ –≤–µ–ª–∏–∫–∏—Ö –æ–±—Å—è–≥–∞—Ö –¥–∞–Ω–∏—Ö